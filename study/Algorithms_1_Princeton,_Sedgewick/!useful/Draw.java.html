<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang = "en">

<head>

<link rel="shortcut icon" href="https://introcs.cs.princeton.edu/favicon.ico">
<link rel="stylesheet"    href="https://introcs.cs.princeton.edu/java.css" type="text/css">

<title>Draw.java</title>

<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<meta NAME="AUTHOR" CONTENT="Robert Sedgewick and Kevin Wayne">
<meta NAME="DESCRIPTION" CONTENT="Draw code in Java">
<meta NAME="TITLE" CONTENT="Draw code in Java">
<meta NAME="KEYWORDS" CONTENT="Draw,java,programming,computer science,algorithm,program,code">
<meta NAME="ROBOTS" CONTENT="INDEX,FOLLOW">

</head>


<body>
<center><h1>Draw.java</h1></center><p><br>

Below is the syntax highlighted version of <a href = "Draw.java">Draw.java</a>
from <a href = "https://introcs.cs.princeton.edu/java/stdlib">&#167; Standard Libraries</a>.
&nbsp; Here is the <a href = "https://introcs.cs.princeton.edu/java/stdlib/javadoc/Draw.html">Javadoc</a>.
<p><br>

<!-- Generator: GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span class="comment">/******************************************************************************</span>
<span class="comment"> *  Compilation:  javac Draw.java</span>
<span class="comment"> *  Execution:    java Draw</span>
<span class="comment"> *  Dependencies: none</span>
<span class="comment"> *</span>
<span class="comment"> *  Drawing library. This class provides a basic capability for creating</span>
<span class="comment"> *  drawings with your programs. It uses a simple graphics model that</span>
<span class="comment"> *  allows you to create drawings consisting of points, lines, and curves</span>
<span class="comment"> *  in a window on your computer and to save the drawings to a file.</span>
<span class="comment"> *  This is the object-oriented version of standard draw; it supports</span>
<span class="comment"> *  multiple independent drawing windows.</span>
<span class="comment"> *</span>
<span class="comment"> *  Todo</span>
<span class="comment"> *  ----</span>
<span class="comment"> *    -  Add support for gradient fill, etc.</span>
<span class="comment"> *</span>
<span class="comment"> *  Remarks</span>
<span class="comment"> *  -------</span>
<span class="comment"> *    -  don't use AffineTransform for rescaling since it inverts</span>
<span class="comment"> *       images and strings</span>
<span class="comment"> *    -  careful using setFont in inner loop within an animation -</span>
<span class="comment"> *       it can cause flicker</span>
<span class="comment"> *</span>
<span class="comment"> ******************************************************************************/</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">BasicStroke</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">Color</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">Component</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">FileDialog</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">Font</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">FontMetrics</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">Graphics</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">Graphics2D</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">Image</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">MediaTracker</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">RenderingHints</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">Toolkit</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">event</span><span class="symbol">.</span><span class="normal">ActionEvent</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">event</span><span class="symbol">.</span><span class="normal">ActionListener</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">event</span><span class="symbol">.</span><span class="normal">MouseEvent</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">event</span><span class="symbol">.</span><span class="normal">MouseListener</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">event</span><span class="symbol">.</span><span class="normal">MouseMotionListener</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">event</span><span class="symbol">.</span><span class="normal">KeyEvent</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">event</span><span class="symbol">.</span><span class="normal">KeyListener</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">util</span><span class="symbol">.</span><span class="normal">Timer</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">util</span><span class="symbol">.</span><span class="normal">TimerTask</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">geom</span><span class="symbol">.</span><span class="normal">Arc2D</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">geom</span><span class="symbol">.</span><span class="normal">Ellipse2D</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">geom</span><span class="symbol">.</span><span class="normal">GeneralPath</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">geom</span><span class="symbol">.</span><span class="normal">Line2D</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">geom</span><span class="symbol">.</span><span class="normal">Rectangle2D</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">awt</span><span class="symbol">.</span><span class="normal">image</span><span class="symbol">.</span><span class="normal">BufferedImage</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">io</span><span class="symbol">.</span><span class="normal">File</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">io</span><span class="symbol">.</span><span class="normal">IOException</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">net</span><span class="symbol">.</span><span class="normal">MalformedURLException</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">net</span><span class="symbol">.</span><span class="normal">URL</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">net</span><span class="symbol">.</span><span class="normal">URI</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">net</span><span class="symbol">.</span><span class="normal">URISyntaxException</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">util</span><span class="symbol">.</span><span class="normal">ArrayList</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">util</span><span class="symbol">.</span><span class="normal">LinkedList</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> java</span><span class="symbol">.</span><span class="normal">util</span><span class="symbol">.</span><span class="normal">TreeSet</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">imageio</span><span class="symbol">.</span><span class="normal">ImageIO</span><span class="symbol">;</span>

<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">swing</span><span class="symbol">.</span><span class="normal">ImageIcon</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">swing</span><span class="symbol">.</span><span class="normal">JFrame</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">swing</span><span class="symbol">.</span><span class="normal">JLabel</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">swing</span><span class="symbol">.</span><span class="normal">JMenu</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">swing</span><span class="symbol">.</span><span class="normal">JMenuBar</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">swing</span><span class="symbol">.</span><span class="normal">JMenuItem</span><span class="symbol">;</span>
<span class="preproc">import</span><span class="normal"> javax</span><span class="symbol">.</span><span class="normal">swing</span><span class="symbol">.</span><span class="normal">KeyStroke</span><span class="symbol">;</span>

<span class="comment">/**</span>
<span class="comment"> *  The </span><span class="keyword">&lt;code&gt;</span><span class="comment">Draw</span><span class="keyword">&lt;/code&gt;</span><span class="comment"> data type provides a basic capability for</span>
<span class="comment"> *  creating drawings with your programs. It uses a simple graphics model that</span>
<span class="comment"> *  allows you to create drawings consisting of points, lines, and curves</span>
<span class="comment"> *  in a window on your computer and to save the drawings to a file.</span>
<span class="comment"> *  This is the object-oriented version of standard draw; it supports</span>
<span class="comment"> *  multiple independent drawing windows.</span>
<span class="comment"> *  </span><span class="keyword">&lt;p&gt;</span>
<span class="comment"> *  For additional documentation, see</span>
<span class="comment"> *  </span><span class="keyword">&lt;a</span><span class="normal"> </span><span class="type">href</span><span class="symbol">=</span><span class="string">"https://introcs.cs.princeton.edu/31datatype"</span><span class="keyword">&gt;</span><span class="comment">Section 3.1</span><span class="keyword">&lt;/a&gt;</span><span class="comment"> of</span>
<span class="comment"> *  </span><span class="keyword">&lt;i&gt;</span><span class="comment">Computer Science: An Interdisciplinary Approach</span><span class="keyword">&lt;/i&gt;</span><span class="comment"> by Robert Sedgewick and Kevin Wayne.</span>
<span class="comment"> *</span>
<span class="comment"> *  </span><span class="type">@author</span><span class="comment"> Robert Sedgewick</span>
<span class="comment"> *  </span><span class="type">@author</span><span class="comment"> Kevin Wayne</span>
<span class="comment"> */</span>
<span class="keyword">public</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="keyword">class</span><span class="normal"> </span><span class="classname">Draw</span><span class="normal"> </span><span class="keyword">implements</span><span class="normal"> ActionListener</span><span class="symbol">,</span><span class="normal"> MouseListener</span><span class="symbol">,</span><span class="normal"> MouseMotionListener</span><span class="symbol">,</span><span class="normal"> KeyListener </span><span class="cbracket">{</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color aqua (0, 255, 255).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> AQUA </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">255</span><span class="symbol">,</span><span class="normal"> </span><span class="number">255</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color black (0, 0, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> BLACK </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">BLACK</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color blue (0, 0, 255).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> BLUE </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">BLUE</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color cyan (0, 255, 255).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> CYAN </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">CYAN</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color fuscia (255, 0, 255).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> FUSCIA </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">255</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">255</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color dark gray (64, 64, 64).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> DARK_GRAY </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">DARK_GRAY</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color gray (128, 128, 128).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> GRAY </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">GRAY</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color green (0, 128, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> GREEN </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">128</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color light gray (192, 192, 192).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> LIGHT_GRAY </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">LIGHT_GRAY</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color lime (0, 255, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> LIME </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">255</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color magenta (255, 0, 255).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> MAGENTA </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">MAGENTA</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color maroon (128, 0, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> MAROON </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">128</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color navy (0, 0, 128).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> NAVY </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">128</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color olive (128, 128, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> OLIVE </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">128</span><span class="symbol">,</span><span class="normal"> </span><span class="number">128</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color orange (255, 200, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> ORANGE </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">ORANGE</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color pink (255, 175, 175).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> PINK </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">PINK</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color purple (128, 0, 128).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> PURPLE </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">128</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">128</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color red (255, 0, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> RED </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">RED</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color silver (192, 192, 192).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> SILVER </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">192</span><span class="symbol">,</span><span class="normal"> </span><span class="number">192</span><span class="symbol">,</span><span class="normal"> </span><span class="number">192</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color teal (0, 128, 128).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> TEAL </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">128</span><span class="symbol">,</span><span class="normal"> </span><span class="number">128</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color white (255, 255, 255).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> WHITE </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">WHITE</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  The color yellow (255, 255, 0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> YELLOW </span><span class="symbol">=</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">YELLOW</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     *  A 100% transparent color, for a transparent background.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> TRANSPARENT </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * The shade of blue used in </span><span class="keyword">&lt;em&gt;</span><span class="comment">Introduction to Programming in Java</span><span class="keyword">&lt;/em&gt;</span><span class="comment">.</span>
<span class="comment">     * It is Pantone 300U. The RGB values are approximately (9, 90, 166).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> BOOK_BLUE </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">9</span><span class="symbol">,</span><span class="normal"> </span><span class="number">90</span><span class="symbol">,</span><span class="normal"> </span><span class="number">166</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * The shade of light blue used in </span><span class="keyword">&lt;em&gt;</span><span class="comment">Introduction to Programming in Java</span><span class="keyword">&lt;/em&gt;</span><span class="comment">.</span>
<span class="comment">     * The RGB values are approximately (103, 198, 243).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> BOOK_LIGHT_BLUE </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">103</span><span class="symbol">,</span><span class="normal"> </span><span class="number">198</span><span class="symbol">,</span><span class="normal"> </span><span class="number">243</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * The shade of red used in </span><span class="keyword">&lt;em&gt;</span><span class="comment">Algorithms, 4th edition</span><span class="keyword">&lt;/em&gt;</span><span class="comment">.</span>
<span class="comment">     * It is Pantone 1805U. The RGB values are approximately (150, 35, 31).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> BOOK_RED </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">150</span><span class="symbol">,</span><span class="normal"> </span><span class="number">35</span><span class="symbol">,</span><span class="normal"> </span><span class="number">31</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * The shade of orange used in Princeton University's identity.</span>
<span class="comment">     * It is PMS 158. The RGB values are approximately (245, 128, 37).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> PRINCETON_ORANGE </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="number">245</span><span class="symbol">,</span><span class="normal"> </span><span class="number">128</span><span class="symbol">,</span><span class="normal"> </span><span class="number">37</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">// default colors</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> DEFAULT_PEN_COLOR </span><span class="symbol">=</span><span class="normal"> BLACK</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> DEFAULT_BACKGROUND_COLOR </span><span class="symbol">=</span><span class="normal"> WHITE</span><span class="symbol">;</span>


<span class="normal">    </span><span class="comment">// boundary of drawing canvas, 0% border</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="type">double</span><span class="normal"> BORDER </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0.0</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="type">double</span><span class="normal"> DEFAULT_XMIN </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0.0</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="type">double</span><span class="normal"> DEFAULT_XMAX </span><span class="symbol">=</span><span class="normal"> </span><span class="number">1.0</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="type">double</span><span class="normal"> DEFAULT_YMIN </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0.0</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="type">double</span><span class="normal"> DEFAULT_YMAX </span><span class="symbol">=</span><span class="normal"> </span><span class="number">1.0</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// default canvas size is SIZE-by-SIZE</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="type">int</span><span class="normal"> DEFAULT_SIZE </span><span class="symbol">=</span><span class="normal"> </span><span class="number">512</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// default pen radius</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="type">double</span><span class="normal"> DEFAULT_PEN_RADIUS </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0.002</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// default font</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Font</span><span class="normal"> DEFAULT_FONT </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Font</span><span class="symbol">(</span><span class="string">"SansSerif"</span><span class="symbol">,</span><span class="normal"> Font</span><span class="symbol">.</span><span class="normal">PLAIN</span><span class="symbol">,</span><span class="normal"> </span><span class="number">16</span><span class="symbol">);</span>

<span class="normal">    </span><span class="comment">// default title of drawing window</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> DEFAULT_WINDOW_TITLE </span><span class="symbol">=</span><span class="normal"> </span><span class="string">"Draw"</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// current pen color</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> penColor </span><span class="symbol">=</span><span class="normal"> DEFAULT_PEN_COLOR</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// background color</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> backgroundColor </span><span class="symbol">=</span><span class="normal"> DEFAULT_BACKGROUND_COLOR</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// current title of drawing window</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> windowTitle </span><span class="symbol">=</span><span class="normal"> DEFAULT_WINDOW_TITLE</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// canvas size</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">int</span><span class="normal"> width  </span><span class="symbol">=</span><span class="normal"> DEFAULT_SIZE</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">int</span><span class="normal"> height </span><span class="symbol">=</span><span class="normal"> DEFAULT_SIZE</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// current pen radius</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> penRadius </span><span class="symbol">=</span><span class="normal"> DEFAULT_PEN_RADIUS</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// show we draw immediately or wait until next show?</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">boolean</span><span class="normal"> defer </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">false</span><span class="symbol">;</span>

<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> xmin </span><span class="symbol">=</span><span class="normal"> DEFAULT_XMIN</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> xmax </span><span class="symbol">=</span><span class="normal"> DEFAULT_XMAX</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> ymin </span><span class="symbol">=</span><span class="normal"> DEFAULT_YMIN</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> ymax </span><span class="symbol">=</span><span class="normal"> DEFAULT_YMAX</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// for synchronization</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Object</span><span class="normal"> mouseLock </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Object</span><span class="symbol">();</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">Object</span><span class="normal"> keyLock </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Object</span><span class="symbol">();</span>

<span class="normal">    </span><span class="comment">// current font</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">Font</span><span class="normal"> font </span><span class="symbol">=</span><span class="normal"> DEFAULT_FONT</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// the JLabel for drawing</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">JLabel</span><span class="normal"> draw</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// double buffered graphics</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">BufferedImage</span><span class="normal"> offscreenImage</span><span class="symbol">,</span><span class="normal"> onscreenImage</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">Graphics2D</span><span class="normal"> offscreen</span><span class="symbol">,</span><span class="normal"> onscreen</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// the frame for drawing to the screen</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">JFrame</span><span class="normal"> frame</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// is the JFrame visible (upon calling draw())?</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="type">boolean</span><span class="normal"> isJFrameVisible </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">true</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// mouse state</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">boolean</span><span class="normal"> isMousePressed </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">false</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> mouseX </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> mouseY </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// keyboard state</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">LinkedList&lt;Character&gt;</span><span class="normal"> keysTyped </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> LinkedList</span><span class="symbol">&lt;</span><span class="normal">Character</span><span class="symbol">&gt;();</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">TreeSet&lt;Integer&gt;</span><span class="normal"> keysDown </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> TreeSet</span><span class="symbol">&lt;</span><span class="normal">Integer</span><span class="symbol">&gt;();</span>

<span class="normal">    </span><span class="comment">// event-based listeners</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">final</span><span class="normal"> </span><span class="usertype">ArrayList&lt;DrawListener&gt;</span><span class="normal"> listeners </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> ArrayList</span><span class="symbol">&lt;</span><span class="normal">DrawListener</span><span class="symbol">&gt;();</span>

<span class="normal">    </span><span class="comment">// timer</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">Timer</span><span class="normal"> timer</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Initializes an empty drawing object.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="function">Draw</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">initCanvas</span><span class="symbol">();</span>
<span class="normal">        </span><span class="function">initGUI</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">// initialize the drawing canvas</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">initCanvas</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>

<span class="normal">        </span><span class="comment">// BufferedImage stuff</span>
<span class="normal">        offscreenImage </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">BufferedImage</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">width</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2</span><span class="symbol">*</span><span class="normal">height</span><span class="symbol">,</span><span class="normal"> BufferedImage</span><span class="symbol">.</span><span class="normal">TYPE_INT_ARGB</span><span class="symbol">);</span>
<span class="normal">        onscreenImage  </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">BufferedImage</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">width</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2</span><span class="symbol">*</span><span class="normal">height</span><span class="symbol">,</span><span class="normal"> BufferedImage</span><span class="symbol">.</span><span class="normal">TYPE_INT_ARGB</span><span class="symbol">);</span>
<span class="normal">        offscreen </span><span class="symbol">=</span><span class="normal"> offscreenImage</span><span class="symbol">.</span><span class="function">createGraphics</span><span class="symbol">();</span>
<span class="normal">        onscreen  </span><span class="symbol">=</span><span class="normal"> onscreenImage</span><span class="symbol">.</span><span class="function">createGraphics</span><span class="symbol">();</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">scale</span><span class="symbol">(</span><span class="number">2.0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2.0</span><span class="symbol">);</span><span class="normal">  </span><span class="comment">// since we made it 2x as big</span>

<span class="normal">        </span><span class="comment">// initialize drawing window</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setBackground</span><span class="symbol">(</span><span class="normal">DEFAULT_BACKGROUND_COLOR</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">clearRect</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> width</span><span class="symbol">,</span><span class="normal"> height</span><span class="symbol">);</span>
<span class="normal">        onscreen</span><span class="symbol">.</span><span class="function">setBackground</span><span class="symbol">(</span><span class="normal">DEFAULT_BACKGROUND_COLOR</span><span class="symbol">);</span>
<span class="normal">        onscreen</span><span class="symbol">.</span><span class="function">clearRect</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2</span><span class="symbol">*</span><span class="normal">width</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2</span><span class="symbol">*</span><span class="normal">height</span><span class="symbol">);</span>

<span class="normal">        </span><span class="comment">// set the pen color</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setColor</span><span class="symbol">(</span><span class="normal">penColor</span><span class="symbol">);</span>

<span class="normal">        </span><span class="comment">// add antialiasing</span>
<span class="normal">        </span><span class="usertype">RenderingHints</span><span class="normal"> hints </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">RenderingHints</span><span class="symbol">(</span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        hints</span><span class="symbol">.</span><span class="function">put</span><span class="symbol">(</span><span class="normal">RenderingHints</span><span class="symbol">.</span><span class="normal">KEY_ANTIALIASING</span><span class="symbol">,</span><span class="normal"> RenderingHints</span><span class="symbol">.</span><span class="normal">VALUE_ANTIALIAS_ON</span><span class="symbol">);</span>
<span class="normal">        hints</span><span class="symbol">.</span><span class="function">put</span><span class="symbol">(</span><span class="normal">RenderingHints</span><span class="symbol">.</span><span class="normal">KEY_RENDERING</span><span class="symbol">,</span><span class="normal"> RenderingHints</span><span class="symbol">.</span><span class="normal">VALUE_RENDER_QUALITY</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">addRenderingHints</span><span class="symbol">(</span><span class="normal">hints</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">// initialize the GUI</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">initGUI</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>

<span class="normal">        </span><span class="comment">// create the JFrame (if necessary)</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">frame </span><span class="symbol">==</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            frame </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">JFrame</span><span class="symbol">();</span>
<span class="normal">            frame</span><span class="symbol">.</span><span class="function">addKeyListener</span><span class="symbol">(</span><span class="keyword">this</span><span class="symbol">);</span><span class="normal">    </span><span class="comment">// JLabel cannot get keyboard focus</span>
<span class="normal">            frame</span><span class="symbol">.</span><span class="function">setFocusTraversalKeysEnabled</span><span class="symbol">(</span><span class="keyword">false</span><span class="symbol">);</span><span class="normal">  </span><span class="comment">// allow VK_TAB with isKeyPressed()</span>
<span class="normal">            frame</span><span class="symbol">.</span><span class="function">setResizable</span><span class="symbol">(</span><span class="keyword">false</span><span class="symbol">);</span>
<span class="normal">            </span><span class="comment">// frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);            // closes all windows</span>
<span class="normal">            frame</span><span class="symbol">.</span><span class="function">setDefaultCloseOperation</span><span class="symbol">(</span><span class="normal">JFrame</span><span class="symbol">.</span><span class="normal">DISPOSE_ON_CLOSE</span><span class="symbol">);</span><span class="normal">      </span><span class="comment">// closes only current window</span>
<span class="normal">            frame</span><span class="symbol">.</span><span class="function">setTitle</span><span class="symbol">(</span><span class="normal">windowTitle</span><span class="symbol">);</span>
<span class="normal">            frame</span><span class="symbol">.</span><span class="function">setJMenuBar</span><span class="symbol">(</span><span class="function">createMenuBar</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="comment">// create the ImageIcon</span>
<span class="normal">        </span><span class="usertype">RetinaImageIcon</span><span class="normal"> icon </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">RetinaImageIcon</span><span class="symbol">(</span><span class="normal">onscreenImage</span><span class="symbol">);</span>
<span class="normal">        draw </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">JLabel</span><span class="symbol">(</span><span class="normal">icon</span><span class="symbol">);</span>
<span class="normal">        draw</span><span class="symbol">.</span><span class="function">addMouseListener</span><span class="symbol">(</span><span class="keyword">this</span><span class="symbol">);</span>
<span class="normal">        draw</span><span class="symbol">.</span><span class="function">addMouseMotionListener</span><span class="symbol">(</span><span class="keyword">this</span><span class="symbol">);</span>

<span class="normal">        </span><span class="comment">// finish up the JFrame</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">setContentPane</span><span class="symbol">(</span><span class="normal">draw</span><span class="symbol">);</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">pack</span><span class="symbol">();</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">requestFocusInWindow</span><span class="symbol">();</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">setVisible</span><span class="symbol">(</span><span class="keyword">false</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Makes the drawing window visible or invisible.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  isVisible if {</span><span class="type">@code</span><span class="comment"> true}, makes the drawing window visible,</span>
<span class="comment">     *         otherwise hides the drawing window.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setVisible</span><span class="symbol">(</span><span class="type">boolean</span><span class="normal"> isVisible</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        isJFrameVisible </span><span class="symbol">=</span><span class="normal"> isVisible</span><span class="symbol">;</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">setVisible</span><span class="symbol">(</span><span class="normal">isVisible</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the upper-left hand corner of the drawing window to be (x, y),</span>
<span class="comment">     * where (0, 0) is upper left.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the number of pixels from the left</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the number of pixels from the top</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if the width or height is 0 or negative</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setLocationOnScreen</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">int</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">x </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> y </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">();</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">setLocation</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the default close operation.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  value the value, typically {</span><span class="type">@code</span><span class="comment"> JFrame.EXIT_ON_CLOSE}</span>
<span class="comment">     *         (close all windows) or {</span><span class="type">@code</span><span class="comment"> JFrame.DISPOSE_ON_CLOSE}</span>
<span class="comment">     *         (close current window)</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setDefaultCloseOperation</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> value</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">setDefaultCloseOperation</span><span class="symbol">(</span><span class="normal">value</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the canvas (drawing area) to be 512-by-512 pixels.</span>
<span class="comment">     * This also clears the current drawing using the default background color (white).</span>
<span class="comment">     * Ordinarily, this method is called once, at the very beginning of a program.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setCanvasSize</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setCanvasSize</span><span class="symbol">(</span><span class="normal">DEFAULT_SIZE</span><span class="symbol">,</span><span class="normal"> DEFAULT_SIZE</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the canvas (drawing area) to be </span><span class="keyword">&lt;em&gt;</span><span class="comment">width</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-by-</span><span class="keyword">&lt;em&gt;</span><span class="comment">height</span><span class="keyword">&lt;/em&gt;</span><span class="comment"> pixels.</span>
<span class="comment">     * This also clears the current drawing using the default background color (white).</span>
<span class="comment">     * Ordinarily, this method is called once, at the very beginning of a program.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  canvasWidth the width as a number of pixels</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  canvasHeight the height as a number of pixels</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException unless both {</span><span class="type">@code</span><span class="comment"> canvasWidth}</span>
<span class="comment">     *         and {</span><span class="type">@code</span><span class="comment"> canvasHeight} are positive</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setCanvasSize</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> canvasWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="type">int</span><span class="normal"> canvasHeight</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">canvasWidth </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> canvasHeight </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"width and height must be positive"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">        width </span><span class="symbol">=</span><span class="normal"> canvasWidth</span><span class="symbol">;</span>
<span class="normal">        height </span><span class="symbol">=</span><span class="normal"> canvasHeight</span><span class="symbol">;</span>
<span class="normal">        </span><span class="function">initCanvas</span><span class="symbol">();</span>
<span class="normal">        </span><span class="function">initGUI</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">// create the menu bar</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="usertype">JMenuBar</span><span class="normal"> </span><span class="function">createMenuBar</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="usertype">JMenuBar</span><span class="normal"> menuBar </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">JMenuBar</span><span class="symbol">();</span>
<span class="normal">        </span><span class="usertype">JMenu</span><span class="normal"> menu </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">JMenu</span><span class="symbol">(</span><span class="string">"File"</span><span class="symbol">);</span>
<span class="normal">        menuBar</span><span class="symbol">.</span><span class="function">add</span><span class="symbol">(</span><span class="normal">menu</span><span class="symbol">);</span>
<span class="normal">        </span><span class="usertype">JMenuItem</span><span class="normal"> menuItem1 </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">JMenuItem</span><span class="symbol">(</span><span class="string">" Save...   "</span><span class="symbol">);</span>
<span class="normal">        menuItem1</span><span class="symbol">.</span><span class="function">addActionListener</span><span class="symbol">(</span><span class="keyword">this</span><span class="symbol">);</span>
<span class="normal">        </span><span class="comment">// Java 11: use getMenuShortcutKeyMaskEx()</span>
<span class="normal">        </span><span class="comment">// Java 8:  use getMenuShortcutKeyMask()</span>
<span class="normal">        menuItem1</span><span class="symbol">.</span><span class="function">setAccelerator</span><span class="symbol">(</span><span class="normal">KeyStroke</span><span class="symbol">.</span><span class="function">getKeyStroke</span><span class="symbol">(</span><span class="normal">KeyEvent</span><span class="symbol">.</span><span class="normal">VK_S</span><span class="symbol">,</span>
<span class="normal">                                Toolkit</span><span class="symbol">.</span><span class="function">getDefaultToolkit</span><span class="symbol">().</span><span class="function">getMenuShortcutKeyMaskEx</span><span class="symbol">()));</span>
<span class="normal">        menu</span><span class="symbol">.</span><span class="function">add</span><span class="symbol">(</span><span class="normal">menuItem1</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">return</span><span class="normal"> menuBar</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Closes the drawing window.</span>
<span class="comment">     * This allows the client program to terminate instead of requiring</span>
<span class="comment">     * the user to close the drawing window manually.</span>
<span class="comment">     * Drawing after calling this method will restore the previous window state.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">close</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">dispose</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Input validation helper methods.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">// throw an IllegalArgumentException if x is NaN or infinite</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">validate</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> name</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">Double</span><span class="symbol">.</span><span class="function">isNaN</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">))</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="normal">name </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" is NaN"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">Double</span><span class="symbol">.</span><span class="function">isInfinite</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">))</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="normal">name </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" is infinite"</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">// throw an IllegalArgumentException if s is null</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> name</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">x </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="normal">name </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" negative"</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">// throw an IllegalArgumentException if s is null</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="usertype">Object</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> name</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">x </span><span class="symbol">==</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="normal">name </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" is null"</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Set the title of the drawing window.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the title of the drawing window to the specified string.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  windowTitle the title of the window</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> title} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setTitle</span><span class="symbol">(</span><span class="usertype">String</span><span class="normal"> windowTitle</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">windowTitle</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"title"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">this</span><span class="symbol">.</span><span class="normal">windowTitle </span><span class="symbol">=</span><span class="normal"> windowTitle</span><span class="symbol">;</span>
<span class="normal">        frame</span><span class="symbol">.</span><span class="function">setTitle</span><span class="symbol">(</span><span class="normal">windowTitle</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  User and screen coordinate systems.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the x-scale to the default range (between 0.0 and 1.0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setXscale</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setXscale</span><span class="symbol">(</span><span class="normal">DEFAULT_XMIN</span><span class="symbol">,</span><span class="normal"> DEFAULT_XMAX</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the y-scale to the default range (between 0.0 and 1.0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setYscale</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setYscale</span><span class="symbol">(</span><span class="normal">DEFAULT_YMIN</span><span class="symbol">,</span><span class="normal"> DEFAULT_YMAX</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the x-scale to the specified range.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> min the minimum value of the x-scale</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> max the maximum value of the x-scale</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> (max == min)}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> min} or {</span><span class="type">@code</span><span class="comment"> max} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setXscale</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> min</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> max</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">min</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"min"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">max</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"max"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> size </span><span class="symbol">=</span><span class="normal"> max </span><span class="symbol">-</span><span class="normal"> min</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">size </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0.0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"the min and max are the same"</span><span class="symbol">);</span>
<span class="normal">        xmin </span><span class="symbol">=</span><span class="normal"> min </span><span class="symbol">-</span><span class="normal"> BORDER </span><span class="symbol">*</span><span class="normal"> size</span><span class="symbol">;</span>
<span class="normal">        xmax </span><span class="symbol">=</span><span class="normal"> max </span><span class="symbol">+</span><span class="normal"> BORDER </span><span class="symbol">*</span><span class="normal"> size</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the y-scale to the specified range.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> min the minimum value of the y-scale</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> max the maximum value of the y-scale</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> (max == min)}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> min} or {</span><span class="type">@code</span><span class="comment"> max} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setYscale</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> min</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> max</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">min</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"min"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">max</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"max"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> size </span><span class="symbol">=</span><span class="normal"> max </span><span class="symbol">-</span><span class="normal"> min</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">size </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0.0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"the min and max are the same"</span><span class="symbol">);</span>
<span class="normal">        ymin </span><span class="symbol">=</span><span class="normal"> min </span><span class="symbol">-</span><span class="normal"> BORDER </span><span class="symbol">*</span><span class="normal"> size</span><span class="symbol">;</span>
<span class="normal">        ymax </span><span class="symbol">=</span><span class="normal"> max </span><span class="symbol">+</span><span class="normal"> BORDER </span><span class="symbol">*</span><span class="normal"> size</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets both the x-scale and y-scale to the default range (between 0.0 and 1.0).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setScale</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setXscale</span><span class="symbol">();</span>
<span class="normal">        </span><span class="function">setYscale</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets both the x-scale and y-scale to the (same) specified range.</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> min the minimum value of the y-scale</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> max the maximum value of the y-scale</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> (max == min)}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> min} or {</span><span class="type">@code</span><span class="comment"> max} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setScale</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> min</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> max</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setXscale</span><span class="symbol">(</span><span class="normal">min</span><span class="symbol">,</span><span class="normal"> max</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">setYscale</span><span class="symbol">(</span><span class="normal">min</span><span class="symbol">,</span><span class="normal"> max</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">// helper functions that scale from user coordinates to screen coordinates and back</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal">  </span><span class="function">scaleX</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="keyword">return</span><span class="normal"> width  </span><span class="symbol">*</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">x </span><span class="symbol">-</span><span class="normal"> xmin</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">xmax </span><span class="symbol">-</span><span class="normal"> xmin</span><span class="symbol">);</span><span class="normal"> </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal">  </span><span class="function">scaleY</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="keyword">return</span><span class="normal"> height </span><span class="symbol">*</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ymax </span><span class="symbol">-</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ymax </span><span class="symbol">-</span><span class="normal"> ymin</span><span class="symbol">);</span><span class="normal"> </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> w</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="keyword">return</span><span class="normal"> w </span><span class="symbol">*</span><span class="normal"> width  </span><span class="symbol">/</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">abs</span><span class="symbol">(</span><span class="normal">xmax </span><span class="symbol">-</span><span class="normal"> xmin</span><span class="symbol">);</span><span class="normal">  </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> h</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="keyword">return</span><span class="normal"> h </span><span class="symbol">*</span><span class="normal"> height </span><span class="symbol">/</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">abs</span><span class="symbol">(</span><span class="normal">ymax </span><span class="symbol">-</span><span class="normal"> ymin</span><span class="symbol">);</span><span class="normal">  </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal">   </span><span class="function">userX</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="keyword">return</span><span class="normal"> xmin </span><span class="symbol">+</span><span class="normal"> x </span><span class="symbol">*</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">xmax </span><span class="symbol">-</span><span class="normal"> xmin</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> width</span><span class="symbol">;</span><span class="normal">    </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">double</span><span class="normal">   </span><span class="function">userY</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="keyword">return</span><span class="normal"> ymax </span><span class="symbol">-</span><span class="normal"> y </span><span class="symbol">*</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ymax </span><span class="symbol">-</span><span class="normal"> ymin</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> height</span><span class="symbol">;</span><span class="normal">   </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Clears the screen using the default background color (white).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">clear</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">clear</span><span class="symbol">(</span><span class="normal">DEFAULT_BACKGROUND_COLOR</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Clears the screen using the specified background color.</span>
<span class="comment">     * To make the background transparent, use {</span><span class="type">@code</span><span class="comment"> Draw.TRANSPARENT}.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> color the color to make the background</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> color} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">clear</span><span class="symbol">(</span><span class="usertype">Color</span><span class="normal"> color</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">color</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"color"</span><span class="symbol">);</span>

<span class="normal">        backgroundColor </span><span class="symbol">=</span><span class="normal"> color</span><span class="symbol">;</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setBackground</span><span class="symbol">(</span><span class="normal">backgroundColor</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">clearRect</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> width</span><span class="symbol">,</span><span class="normal"> height</span><span class="symbol">);</span>

<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns the current pen radius.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the current pen radius</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">double</span><span class="normal"> </span><span class="function">getPenRadius</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">return</span><span class="normal"> penRadius</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the pen radius to the default (0.002).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setPenRadius</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setPenRadius</span><span class="symbol">(</span><span class="normal">DEFAULT_PEN_RADIUS</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the radius of the pen to the given size.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  radius the radius of the pen</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> radius} is negative, NaN, or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setPenRadius</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> radius</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"pen radius"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"pen radius"</span><span class="symbol">);</span>

<span class="normal">        penRadius </span><span class="symbol">=</span><span class="normal"> radius </span><span class="symbol">*</span><span class="normal"> DEFAULT_SIZE</span><span class="symbol">;</span>
<span class="normal">        </span><span class="usertype">BasicStroke</span><span class="normal"> stroke </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">BasicStroke</span><span class="symbol">((</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> penRadius</span><span class="symbol">,</span><span class="normal"> BasicStroke</span><span class="symbol">.</span><span class="normal">CAP_ROUND</span><span class="symbol">,</span><span class="normal"> BasicStroke</span><span class="symbol">.</span><span class="normal">JOIN_ROUND</span><span class="symbol">);</span>
<span class="normal">        </span><span class="comment">// BasicStroke stroke = new BasicStroke((float) penRadius);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setStroke</span><span class="symbol">(</span><span class="normal">stroke</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns the current pen color.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the current pen color</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> </span><span class="function">getPenColor</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">return</span><span class="normal"> penColor</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns the current background color.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the current background color</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="usertype">Color</span><span class="normal"> </span><span class="function">getBackgroundColor</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">return</span><span class="normal"> backgroundColor</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the pen color to the default color (black).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setPenColor</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setPenColor</span><span class="symbol">(</span><span class="normal">DEFAULT_PEN_COLOR</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the pen color to the given color.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> color the color to make the pen</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> color} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setPenColor</span><span class="symbol">(</span><span class="usertype">Color</span><span class="normal"> color</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">color</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"color"</span><span class="symbol">);</span>
<span class="normal">        penColor </span><span class="symbol">=</span><span class="normal"> color</span><span class="symbol">;</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setColor</span><span class="symbol">(</span><span class="normal">penColor</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the pen color to the given RGB color.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  red the amount of red (between 0 and 255)</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  green the amount of green (between 0 and 255)</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  blue the amount of blue (between 0 and 255)</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> red}, {</span><span class="type">@code</span><span class="comment"> green},</span>
<span class="comment">     *         or {</span><span class="type">@code</span><span class="comment"> blue} is outside its prescribed range</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setPenColor</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> red</span><span class="symbol">,</span><span class="normal"> </span><span class="type">int</span><span class="normal"> green</span><span class="symbol">,</span><span class="normal"> </span><span class="type">int</span><span class="normal"> blue</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">red   </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> red   </span><span class="symbol">&gt;=</span><span class="normal"> </span><span class="number">256</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"red must be between 0 and 255"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">green </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> green </span><span class="symbol">&gt;=</span><span class="normal"> </span><span class="number">256</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"green must be between 0 and 255"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">blue  </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> blue  </span><span class="symbol">&gt;=</span><span class="normal"> </span><span class="number">256</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"blue must be between 0 and 255"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">setPenColor</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> </span><span class="function">Color</span><span class="symbol">(</span><span class="normal">red</span><span class="symbol">,</span><span class="normal"> green</span><span class="symbol">,</span><span class="normal"> blue</span><span class="symbol">));</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Turns on xor mode.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">xorOn</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setXORMode</span><span class="symbol">(</span><span class="normal">backgroundColor</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Turns off xor mode.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">xorOff</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setPaintMode</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns the current {</span><span class="type">@code</span><span class="comment"> JLabel} for use in some other GUI.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the current {</span><span class="type">@code</span><span class="comment"> JLabel}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="usertype">JLabel</span><span class="normal"> </span><span class="function">getJLabel</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">return</span><span class="normal"> draw</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns the current font.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the current font</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="usertype">Font</span><span class="normal"> </span><span class="function">getFont</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">return</span><span class="normal"> font</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the font to the default font (sans serif, 16 point).</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setFont</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">setFont</span><span class="symbol">(</span><span class="normal">DEFAULT_FONT</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Sets the font to the given value.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> font the font</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> font} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">setFont</span><span class="symbol">(</span><span class="usertype">Font</span><span class="normal"> font</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">font</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"font"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">this</span><span class="symbol">.</span><span class="normal">font </span><span class="symbol">=</span><span class="normal"> font</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Drawing geometric shapes.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a line from (x0, y0) to (x1, y1).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> x0 the x-coordinate of the starting point</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> y0 the y-coordinate of the starting point</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> x1 the x-coordinate of the destination point</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> y1 the y-coordinate of the destination point</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any coordinate is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">line</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x0</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y0</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> x1</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y1</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x0</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x0"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y0</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y0"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x1</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x1"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y1</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y1"</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">draw</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Line2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x0</span><span class="symbol">),</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y0</span><span class="symbol">),</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x1</span><span class="symbol">),</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y1</span><span class="symbol">)));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws one pixel at (x, y).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> x the x-coordinate of the pixel</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> y the y-coordinate of the pixel</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> x} or {</span><span class="type">@code</span><span class="comment"> y} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">fillRect</span><span class="symbol">((</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">)),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">)),</span><span class="normal"> </span><span class="number">1</span><span class="symbol">,</span><span class="normal"> </span><span class="number">1</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a point at (x, y).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> x the x-coordinate of the point</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> y the y-coordinate of the point</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> x} or {</span><span class="type">@code</span><span class="comment"> y} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">point</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> r </span><span class="symbol">=</span><span class="normal"> penRadius</span><span class="symbol">;</span>
<span class="normal">        </span><span class="comment">// double ws = factorX(2*r);</span>
<span class="normal">        </span><span class="comment">// double hs = factorY(2*r);</span>
<span class="normal">        </span><span class="comment">// if (ws &lt;= 1 &amp;&amp; hs &lt;= 1) pixel(x, y);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">r </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">fill</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Ellipse2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> r</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> r</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> r</span><span class="symbol">,</span><span class="normal"> r</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a circle of the specified radius, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the x-coordinate of the center of the circle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the y-coordinate of the center of the circle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  radius the radius of the circle</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> radius} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">circle</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> radius</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"radius"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"radius"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">radius</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">radius</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">draw</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Ellipse2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a filled circle of the specified radius, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the x-coordinate of the center of the circle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the y-coordinate of the center of the circle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  radius the radius of the circle</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> radius} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">filledCircle</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> radius</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"radius"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"radius"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">radius</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">radius</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">fill</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Ellipse2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws an ellipse with the specified semimajor and semiminor axes,</span>
<span class="comment">     * centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the ellipse</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the ellipse</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  semiMajorAxis is the semimajor axis of the ellipse</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  semiMinorAxis is the semiminor axis of the ellipse</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> semiMajorAxis}</span>
<span class="comment">     *         or {</span><span class="type">@code</span><span class="comment"> semiMinorAxis} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">ellipse</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> semiMajorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> semiMinorAxis</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">semiMajorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semimajor axis"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">semiMinorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semiminor axis"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">semiMajorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semimajor axis"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">semiMinorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semiminor axis"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">semiMajorAxis</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">semiMinorAxis</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">draw</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Ellipse2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a filled ellipse with the specified semimajor and semiminor axes,</span>
<span class="comment">     * centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the ellipse</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the ellipse</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  semiMajorAxis is the semimajor axis of the ellipse</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  semiMinorAxis is the semiminor axis of the ellipse</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> semiMajorAxis}</span>
<span class="comment">     *         or {</span><span class="type">@code</span><span class="comment"> semiMinorAxis} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">filledEllipse</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> semiMajorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> semiMinorAxis</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">semiMajorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semimajor axis"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">semiMinorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semiminor axis"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">semiMajorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semimajor axis"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">semiMinorAxis</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"semiminor axis"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">semiMajorAxis</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">semiMinorAxis</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">fill</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Ellipse2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a circular arc of the specified radius,</span>
<span class="comment">     * centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">), from angle1 to angle2 (in degrees).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the circle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the circle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  radius the radius of the circle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  angle1 the starting angle. 0 would mean an arc beginning at 3 o'clock.</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  angle2 the angle at the end of the arc. For example, if</span>
<span class="comment">     *         you want a 90 degree arc, then angle2 should be angle1 + 90.</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> radius} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">arc</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> radius</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> angle1</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> angle2</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"arc radius"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">angle1</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"angle1"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">angle2</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"angle2"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">radius</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"arc radius"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="keyword">while</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">angle2 </span><span class="symbol">&lt;</span><span class="normal"> angle1</span><span class="symbol">)</span><span class="normal"> angle2 </span><span class="symbol">+=</span><span class="normal"> </span><span class="number">360</span><span class="symbol">;</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">radius</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">radius</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">draw</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Arc2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">,</span><span class="normal"> angle1</span><span class="symbol">,</span><span class="normal"> angle2 </span><span class="symbol">-</span><span class="normal"> angle1</span><span class="symbol">,</span><span class="normal"> Arc2D</span><span class="symbol">.</span><span class="normal">OPEN</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a square of the specified size, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the square</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the square</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  halfLength one half the length of any side of the square</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> halfLength} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">square</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> halfLength</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">halfLength</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"halfLength"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">halfLength</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"half length"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfLength</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfLength</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">draw</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Rectangle2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a square of the specified size, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the square</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the square</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  halfLength one half the length of any side of the square</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> halfLength} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">filledSquare</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> halfLength</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">halfLength</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"halfLength"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">halfLength</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"half length"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfLength</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfLength</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">fill</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Rectangle2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a rectangle of the specified size, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the rectangle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the rectangle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  halfWidth one half the width of the rectangle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  halfHeight one half the height of the rectangle</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> halfWidth} or {</span><span class="type">@code</span><span class="comment"> halfHeight} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">rectangle</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> halfWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> halfHeight</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">halfWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"halfWidth"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">halfHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"halfHeight"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">halfWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"half width"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">halfHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"half height"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfWidth</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfHeight</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">draw</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Rectangle2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a filled rectangle of the specified size, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the rectangle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the center of the rectangle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  halfWidth one half the width of the rectangle</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  halfHeight one half the height of the rectangle</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> halfWidth} or {</span><span class="type">@code</span><span class="comment"> halfHeight} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any argument is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">filledRectangle</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> halfWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> halfHeight</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">halfWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"halfWidth"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">halfHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"halfHeight"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">halfWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"half width"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">halfHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"half height"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfWidth</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">halfHeight</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">fill</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> Rectangle2D</span><span class="symbol">.</span><span class="function">Double</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2</span><span class="symbol">,</span><span class="normal"> ws</span><span class="symbol">,</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a polygon with the vertices</span>
<span class="comment">     * (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">0</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">0</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">),</span>
<span class="comment">     * (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">), ...,</span>
<span class="comment">     * (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;&lt;em&gt;</span><span class="comment">n</span><span class="keyword">&lt;/em&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;&lt;em&gt;</span><span class="comment">n</span><span class="keyword">&lt;/em&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x an array of all the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinates of the polygon</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y an array of all the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinates of the polygon</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException unless {</span><span class="type">@code</span><span class="comment"> x[]} and {</span><span class="type">@code</span><span class="comment"> y[]}</span>
<span class="comment">     *         are of the same length</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any coordinate is either NaN or infinite</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> x[]} or {</span><span class="type">@code</span><span class="comment"> y[]} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">polygon</span><span class="symbol">(</span><span class="type">double</span><span class="symbol">[]</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="symbol">[]</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x-coordinate array"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y-coordinate array"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> x</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span><span class="normal"> </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">],</span><span class="normal"> </span><span class="string">"x["</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> i </span><span class="symbol">+</span><span class="normal"> </span><span class="string">"]"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> y</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span><span class="normal"> </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">],</span><span class="normal"> </span><span class="string">"y["</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> i </span><span class="symbol">+</span><span class="normal"> </span><span class="string">"]"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">int</span><span class="normal"> n1 </span><span class="symbol">=</span><span class="normal"> x</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> n2 </span><span class="symbol">=</span><span class="normal"> y</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">n1 </span><span class="symbol">!=</span><span class="normal"> n2</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"arrays must be of the same length"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> n </span><span class="symbol">=</span><span class="normal"> n1</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">n </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">return</span><span class="symbol">;</span>

<span class="normal">        </span><span class="usertype">GeneralPath</span><span class="normal"> path </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">GeneralPath</span><span class="symbol">();</span>
<span class="normal">        path</span><span class="symbol">.</span><span class="function">moveTo</span><span class="symbol">((</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">[</span><span class="number">0</span><span class="symbol">]),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">[</span><span class="number">0</span><span class="symbol">]));</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> n</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span>
<span class="normal">            path</span><span class="symbol">.</span><span class="function">lineTo</span><span class="symbol">((</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">]),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">]));</span>
<span class="normal">        path</span><span class="symbol">.</span><span class="function">closePath</span><span class="symbol">();</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">draw</span><span class="symbol">(</span><span class="normal">path</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws a filled polygon with the vertices</span>
<span class="comment">     * (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">0</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">0</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">),</span>
<span class="comment">     * (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">), ...,</span>
<span class="comment">     * (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;&lt;em&gt;</span><span class="comment">n</span><span class="keyword">&lt;/em&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;&lt;sub&gt;&lt;em&gt;</span><span class="comment">n</span><span class="keyword">&lt;/em&gt;</span><span class="comment">1</span><span class="keyword">&lt;/sub&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x an array of all the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinates of the polygon</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y an array of all the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinates of the polygon</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException unless {</span><span class="type">@code</span><span class="comment"> x[]} and {</span><span class="type">@code</span><span class="comment"> y[]}</span>
<span class="comment">     *         are of the same length</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if any coordinate is either NaN or infinite</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> x[]} or {</span><span class="type">@code</span><span class="comment"> y[]} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">filledPolygon</span><span class="symbol">(</span><span class="type">double</span><span class="symbol">[]</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="symbol">[]</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x-coordinate array"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y-coordinate array"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> x</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span><span class="normal"> </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">],</span><span class="normal"> </span><span class="string">"x["</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> i </span><span class="symbol">+</span><span class="normal"> </span><span class="string">"]"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> y</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span><span class="normal"> </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">],</span><span class="normal"> </span><span class="string">"y["</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> i </span><span class="symbol">+</span><span class="normal"> </span><span class="string">"]"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">int</span><span class="normal"> n1 </span><span class="symbol">=</span><span class="normal"> x</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> n2 </span><span class="symbol">=</span><span class="normal"> y</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">n1 </span><span class="symbol">!=</span><span class="normal"> n2</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"arrays must be of the same length"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> n </span><span class="symbol">=</span><span class="normal"> n1</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">n </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">return</span><span class="symbol">;</span>

<span class="normal">        </span><span class="usertype">GeneralPath</span><span class="normal"> path </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">GeneralPath</span><span class="symbol">();</span>
<span class="normal">        path</span><span class="symbol">.</span><span class="function">moveTo</span><span class="symbol">((</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">[</span><span class="number">0</span><span class="symbol">]),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">[</span><span class="number">0</span><span class="symbol">]));</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="normal"> i </span><span class="symbol">=</span><span class="normal"> </span><span class="number">0</span><span class="symbol">;</span><span class="normal"> i </span><span class="symbol">&lt;</span><span class="normal"> n</span><span class="symbol">;</span><span class="normal"> i</span><span class="symbol">++)</span>
<span class="normal">            path</span><span class="symbol">.</span><span class="function">lineTo</span><span class="symbol">((</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">]),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">]));</span>
<span class="normal">        path</span><span class="symbol">.</span><span class="function">closePath</span><span class="symbol">();</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">fill</span><span class="symbol">(</span><span class="normal">path</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>



<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Drawing images.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">// get an image from the given filename</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="usertype">Image</span><span class="normal"> </span><span class="function">getImage</span><span class="symbol">(</span><span class="usertype">String</span><span class="normal"> filename</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">filename </span><span class="symbol">==</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">();</span>

<span class="normal">        </span><span class="comment">// to read from file</span>
<span class="normal">        </span><span class="usertype">ImageIcon</span><span class="normal"> icon </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">ImageIcon</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>

<span class="normal">        </span><span class="comment">// try to read from URL</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">icon</span><span class="symbol">.</span><span class="function">getImageLoadStatus</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">!=</span><span class="normal"> MediaTracker</span><span class="symbol">.</span><span class="normal">COMPLETE</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">try</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">                </span><span class="usertype">URI</span><span class="normal"> uri </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">URI</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>
<span class="normal">                </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">uri</span><span class="symbol">.</span><span class="function">isAbsolute</span><span class="symbol">())</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">                    </span><span class="usertype">URL</span><span class="normal"> url </span><span class="symbol">=</span><span class="normal"> uri</span><span class="symbol">.</span><span class="function">toURL</span><span class="symbol">();</span>
<span class="normal">                    icon </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">ImageIcon</span><span class="symbol">(</span><span class="normal">url</span><span class="symbol">);</span>
<span class="normal">                </span><span class="cbracket">}</span>
<span class="normal">            </span><span class="cbracket">}</span>
<span class="normal">            </span><span class="keyword">catch</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">MalformedURLException </span><span class="symbol">|</span><span class="normal"> </span><span class="usertype">URISyntaxException</span><span class="normal"> e</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">                </span><span class="comment">/* not a url */</span>
<span class="normal">            </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="comment">// in case file is inside a .jar (classpath relative to Draw)</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">icon</span><span class="symbol">.</span><span class="function">getImageLoadStatus</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">!=</span><span class="normal"> MediaTracker</span><span class="symbol">.</span><span class="normal">COMPLETE</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="usertype">URL</span><span class="normal"> url </span><span class="symbol">=</span><span class="normal"> Draw</span><span class="symbol">.</span><span class="keyword">class</span><span class="symbol">.</span><span class="function">getResource</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>
<span class="normal">            </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">url </span><span class="symbol">!=</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">)</span>
<span class="normal">                icon </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">ImageIcon</span><span class="symbol">(</span><span class="normal">url</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="comment">// in case file is inside a .jar (classpath relative to root of jar)</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">icon</span><span class="symbol">.</span><span class="function">getImageLoadStatus</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">!=</span><span class="normal"> MediaTracker</span><span class="symbol">.</span><span class="normal">COMPLETE</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="usertype">URL</span><span class="normal"> url </span><span class="symbol">=</span><span class="normal"> Draw</span><span class="symbol">.</span><span class="keyword">class</span><span class="symbol">.</span><span class="function">getResource</span><span class="symbol">(</span><span class="string">"/"</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename</span><span class="symbol">);</span>
<span class="normal">            </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">url </span><span class="symbol">==</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"could not read image: '"</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename </span><span class="symbol">+</span><span class="normal"> </span><span class="string">"'"</span><span class="symbol">);</span>
<span class="normal">            icon </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">ImageIcon</span><span class="symbol">(</span><span class="normal">url</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="keyword">return</span><span class="normal"> icon</span><span class="symbol">.</span><span class="function">getImage</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws the specified image centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     * The supported image formats are typically JPEG, PNG, GIF, TIFF, and BMP.</span>
<span class="comment">     * As an optimization, the picture is cached, so there is no performance</span>
<span class="comment">     * penalty for redrawing the same image multiple times (e.g., in an animation).</span>
<span class="comment">     * However, if you change the picture file after drawing it, subsequent</span>
<span class="comment">     * calls will draw the original picture.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  filename the name of the image/picture, e.g., "ball.gif"</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if the image filename is invalid</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> x} or {</span><span class="type">@code</span><span class="comment"> y} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">picture</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> filename</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"filename"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="usertype">Image</span><span class="normal"> image </span><span class="symbol">=</span><span class="normal"> </span><span class="function">getImage</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> image</span><span class="symbol">.</span><span class="function">getWidth</span><span class="symbol">(</span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> image</span><span class="symbol">.</span><span class="function">getHeight</span><span class="symbol">(</span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> hs </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"image "</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" is corrupt"</span><span class="symbol">);</span>

<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">drawImage</span><span class="symbol">(</span><span class="normal">image</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws the specified image centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">),</span>
<span class="comment">     * rotated given number of degrees.</span>
<span class="comment">     * The supported image formats are typically JPEG, PNG, GIF, TIFF, and BMP.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  filename the name of the image/picture, e.g., "ball.gif"</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  degrees is the number of degrees to rotate counterclockwise</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if the image filename is invalid</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> x}, {</span><span class="type">@code</span><span class="comment"> y}, {</span><span class="type">@code</span><span class="comment"> degrees} is NaN or infinite</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> filename} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">picture</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> filename</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> degrees</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">degrees</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"degrees"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"filename"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="usertype">Image</span><span class="normal"> image </span><span class="symbol">=</span><span class="normal"> </span><span class="function">getImage</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> image</span><span class="symbol">.</span><span class="function">getWidth</span><span class="symbol">(</span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> image</span><span class="symbol">.</span><span class="function">getHeight</span><span class="symbol">(</span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> hs </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"image "</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" is corrupt"</span><span class="symbol">);</span>

<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">rotate</span><span class="symbol">(</span><span class="normal">Math</span><span class="symbol">.</span><span class="function">toRadians</span><span class="symbol">(-</span><span class="normal">degrees</span><span class="symbol">),</span><span class="normal"> xs</span><span class="symbol">,</span><span class="normal"> ys</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">drawImage</span><span class="symbol">(</span><span class="normal">image</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">rotate</span><span class="symbol">(</span><span class="normal">Math</span><span class="symbol">.</span><span class="function">toRadians</span><span class="symbol">(+</span><span class="normal">degrees</span><span class="symbol">),</span><span class="normal"> xs</span><span class="symbol">,</span><span class="normal"> ys</span><span class="symbol">);</span>

<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws the specified image centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">),</span>
<span class="comment">     * rescaled to the specified bounding box.</span>
<span class="comment">     * The supported image formats are typically JPEG, PNG, GIF, TIFF, and BMP.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  filename the name of the image/picture, e.g., "ball.gif"</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  scaledWidth the width of the scaled image (in screen coordinates)</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  scaledHeight the height of the scaled image (in screen coordinates)</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> scaledWidth}</span>
<span class="comment">     *         or {</span><span class="type">@code</span><span class="comment"> scaledHeight} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if the image filename is invalid</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> x} or {</span><span class="type">@code</span><span class="comment"> y} is either NaN or infinite</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> filename} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">picture</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> filename</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> scaledWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> scaledHeight</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">scaledWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled width"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">scaledHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled height"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"filename"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">scaledWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled width"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">scaledHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled height"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="usertype">Image</span><span class="normal"> image </span><span class="symbol">=</span><span class="normal"> </span><span class="function">getImage</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="normal">scaledWidth</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="normal">scaledHeight</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> hs </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"image "</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" is corrupt"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">else</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            offscreen</span><span class="symbol">.</span><span class="function">drawImage</span><span class="symbol">(</span><span class="normal">image</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span>
<span class="normal">                                       </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span>
<span class="normal">                                       </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">ws</span><span class="symbol">),</span>
<span class="normal">                                       </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">hs</span><span class="symbol">),</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Draws the specified image centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">), rotated</span>
<span class="comment">     * given number of degrees, and rescaled to the specified bounding box.</span>
<span class="comment">     * The supported image formats are typically JPEG, PNG, GIF, TIFF, and BMP.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the image</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  filename the name of the image/picture, e.g., "ball.gif"</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  scaledWidth the width of the scaled image (in screen coordinates)</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  scaledHeight the height of the scaled image (in screen coordinates)</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  degrees is the number of degrees to rotate counterclockwise</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if either {</span><span class="type">@code</span><span class="comment"> scaledWidth}</span>
<span class="comment">     *         or {</span><span class="type">@code</span><span class="comment"> scaledHeight} is negative</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if the image filename is invalid</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">picture</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> filename</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> scaledWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> scaledHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> degrees</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">scaledWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled width"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">scaledHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled height"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">degrees</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"degrees"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"filename"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">scaledWidth</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled width"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNonnegative</span><span class="symbol">(</span><span class="normal">scaledHeight</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"scaled height"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="usertype">Image</span><span class="normal"> image </span><span class="symbol">=</span><span class="normal"> </span><span class="function">getImage</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorX</span><span class="symbol">(</span><span class="normal">scaledWidth</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">factorY</span><span class="symbol">(</span><span class="normal">scaledHeight</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> hs </span><span class="symbol">&lt;</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"image "</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename </span><span class="symbol">+</span><span class="normal"> </span><span class="string">" is corrupt"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ws </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> hs </span><span class="symbol">&lt;=</span><span class="normal"> </span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="function">pixel</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>

<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">rotate</span><span class="symbol">(</span><span class="normal">Math</span><span class="symbol">.</span><span class="function">toRadians</span><span class="symbol">(-</span><span class="normal">degrees</span><span class="symbol">),</span><span class="normal"> xs</span><span class="symbol">,</span><span class="normal"> ys</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">drawImage</span><span class="symbol">(</span><span class="normal">image</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span>
<span class="normal">                                   </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">ys </span><span class="symbol">-</span><span class="normal"> hs</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span>
<span class="normal">                                   </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">ws</span><span class="symbol">),</span>
<span class="normal">                                   </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="normal">hs</span><span class="symbol">),</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">rotate</span><span class="symbol">(</span><span class="normal">Math</span><span class="symbol">.</span><span class="function">toRadians</span><span class="symbol">(+</span><span class="normal">degrees</span><span class="symbol">),</span><span class="normal"> xs</span><span class="symbol">,</span><span class="normal"> ys</span><span class="symbol">);</span>

<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Drawing text.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Writes the given text string in the current font, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  text the text to write</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> text} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> x} or {</span><span class="type">@code</span><span class="comment"> y} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">text</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> text</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"text"</span><span class="symbol">);</span>

<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setFont</span><span class="symbol">(</span><span class="normal">font</span><span class="symbol">);</span>
<span class="normal">        </span><span class="usertype">FontMetrics</span><span class="normal"> metrics </span><span class="symbol">=</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">getFontMetrics</span><span class="symbol">();</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> metrics</span><span class="symbol">.</span><span class="function">stringWidth</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> metrics</span><span class="symbol">.</span><span class="function">getDescent</span><span class="symbol">();</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">drawString</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">/</span><span class="number">2.0</span><span class="symbol">),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ys </span><span class="symbol">+</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Writes the given text string in the current font, centered at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">) and</span>
<span class="comment">     * rotated by the specified number of degrees.</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the center </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  text the text to write</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  degrees is the number of degrees to rotate counterclockwise</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> text} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> x}, {</span><span class="type">@code</span><span class="comment"> y}, or {</span><span class="type">@code</span><span class="comment"> degrees} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">text</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> text</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> degrees</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">degrees</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"degrees"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"text"</span><span class="symbol">);</span>

<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">rotate</span><span class="symbol">(</span><span class="normal">Math</span><span class="symbol">.</span><span class="function">toRadians</span><span class="symbol">(-</span><span class="normal">degrees</span><span class="symbol">),</span><span class="normal"> xs</span><span class="symbol">,</span><span class="normal"> ys</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">text</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> text</span><span class="symbol">);</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">rotate</span><span class="symbol">(</span><span class="normal">Math</span><span class="symbol">.</span><span class="function">toRadians</span><span class="symbol">(+</span><span class="normal">degrees</span><span class="symbol">),</span><span class="normal"> xs</span><span class="symbol">,</span><span class="normal"> ys</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Writes the given text string in the current font, left-aligned at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  text the text</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> text} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> x} or {</span><span class="type">@code</span><span class="comment"> y} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">textLeft</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> text</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"text"</span><span class="symbol">);</span>

<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setFont</span><span class="symbol">(</span><span class="normal">font</span><span class="symbol">);</span>
<span class="normal">        </span><span class="usertype">FontMetrics</span><span class="normal"> metrics </span><span class="symbol">=</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">getFontMetrics</span><span class="symbol">();</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="comment">// int ws = metrics.stringWidth(text);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> metrics</span><span class="symbol">.</span><span class="function">getDescent</span><span class="symbol">();</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">drawString</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> xs</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ys </span><span class="symbol">+</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Writes the given text string in the current font, right-aligned at (</span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">, </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">).</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  x the </span><span class="keyword">&lt;em&gt;</span><span class="comment">x</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  y the </span><span class="keyword">&lt;em&gt;</span><span class="comment">y</span><span class="keyword">&lt;/em&gt;</span><span class="comment">-coordinate of the text</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  text the text to write</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> text} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> x} or {</span><span class="type">@code</span><span class="comment"> y} is either NaN or infinite</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">textRight</span><span class="symbol">(</span><span class="type">double</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">double</span><span class="normal"> y</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">String</span><span class="normal"> text</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"x"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validate</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"y"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"text"</span><span class="symbol">);</span>

<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">setFont</span><span class="symbol">(</span><span class="normal">font</span><span class="symbol">);</span>
<span class="normal">        </span><span class="usertype">FontMetrics</span><span class="normal"> metrics </span><span class="symbol">=</span><span class="normal"> offscreen</span><span class="symbol">.</span><span class="function">getFontMetrics</span><span class="symbol">();</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> xs </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleX</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="normal"> ys </span><span class="symbol">=</span><span class="normal"> </span><span class="function">scaleY</span><span class="symbol">(</span><span class="normal">y</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> ws </span><span class="symbol">=</span><span class="normal"> metrics</span><span class="symbol">.</span><span class="function">stringWidth</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">int</span><span class="normal"> hs </span><span class="symbol">=</span><span class="normal"> metrics</span><span class="symbol">.</span><span class="function">getDescent</span><span class="symbol">();</span>
<span class="normal">        offscreen</span><span class="symbol">.</span><span class="function">drawString</span><span class="symbol">(</span><span class="normal">text</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">xs </span><span class="symbol">-</span><span class="normal"> ws</span><span class="symbol">),</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ys </span><span class="symbol">+</span><span class="normal"> hs</span><span class="symbol">));</span>
<span class="normal">        </span><span class="function">draw</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Copies the offscreen buffer to the onscreen buffer, pauses for t milliseconds</span>
<span class="comment">     * and enables double buffering.</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> t number of milliseconds</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> t} is negative</span>
<span class="comment">     * </span><span class="type">@deprecated</span><span class="comment"> replaced by {</span><span class="type">@link</span><span class="comment"> #enableDoubleBuffering()}, {</span><span class="type">@link</span><span class="comment"> #show()}, and {</span><span class="type">@link</span><span class="comment"> #pause(int t)}</span>
<span class="comment">     */</span>
<span class="normal">    @Deprecated</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">show</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> t</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">show</span><span class="symbol">();</span>
<span class="normal">        </span><span class="function">pause</span><span class="symbol">(</span><span class="normal">t</span><span class="symbol">);</span>
<span class="normal">        </span><span class="function">enableDoubleBuffering</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Pause for t milliseconds. This method is intended to support computer animations.</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> t number of milliseconds</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> t} is negative</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">pause</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> t</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">try</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            Thread</span><span class="symbol">.</span><span class="function">sleep</span><span class="symbol">(</span><span class="normal">t</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="keyword">catch</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">InterruptedException</span><span class="normal"> e</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            System</span><span class="symbol">.</span><span class="normal">out</span><span class="symbol">.</span><span class="function">println</span><span class="symbol">(</span><span class="string">"Error sleeping"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Copies offscreen buffer to onscreen buffer. There is no reason to call</span>
<span class="comment">     * this method unless double buffering is enabled.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">show</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        onscreen</span><span class="symbol">.</span><span class="function">setBackground</span><span class="symbol">(</span><span class="normal">backgroundColor</span><span class="symbol">);</span>
<span class="normal">        onscreen</span><span class="symbol">.</span><span class="function">clearRect</span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2</span><span class="symbol">*</span><span class="normal">width</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2</span><span class="symbol">*</span><span class="normal">height</span><span class="symbol">);</span>
<span class="normal">        onscreen</span><span class="symbol">.</span><span class="function">drawImage</span><span class="symbol">(</span><span class="normal">offscreenImage</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">);</span>

<span class="normal">        </span><span class="comment">// make frame visible upon first call to show()</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">frame</span><span class="symbol">.</span><span class="function">isVisible</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">!=</span><span class="normal"> isJFrameVisible</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            frame</span><span class="symbol">.</span><span class="function">setVisible</span><span class="symbol">(</span><span class="normal">isJFrameVisible</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        frame</span><span class="symbol">.</span><span class="function">repaint</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">// draw onscreen if defer is false</span>
<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">draw</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="normal">defer</span><span class="symbol">)</span><span class="normal"> </span><span class="function">show</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Enable double buffering. All subsequent calls to</span>
<span class="comment">     * drawing methods such as {</span><span class="type">@code</span><span class="comment"> line()}, {</span><span class="type">@code</span><span class="comment"> circle()},</span>
<span class="comment">     * and {</span><span class="type">@code</span><span class="comment"> square()} will be deferred until the next call</span>
<span class="comment">     * to show(). Useful for animations.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">enableDoubleBuffering</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        defer </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">true</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Disable double buffering. All subsequent calls to</span>
<span class="comment">     * drawing methods such as {</span><span class="type">@code</span><span class="comment"> line()}, {</span><span class="type">@code</span><span class="comment"> circle()},</span>
<span class="comment">     * and {</span><span class="type">@code</span><span class="comment"> square()} will be displayed on screen when called.</span>
<span class="comment">     * This is the default.</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">disableDoubleBuffering</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        defer </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">false</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Saves the drawing to a file in a supported file format</span>
<span class="comment">     * (typically JPEG, PNG, GIF, TIFF, and BMP).</span>
<span class="comment">     * The filetype extension must be {</span><span class="type">@code</span><span class="comment"> .jpg}, {</span><span class="type">@code</span><span class="comment"> .png}, {</span><span class="type">@code</span><span class="comment"> .gif},</span>
<span class="comment">     * {</span><span class="type">@code</span><span class="comment"> .bmp}, or {</span><span class="type">@code</span><span class="comment"> .tif}.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  filename the name of the file</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> filename} is {</span><span class="type">@code</span><span class="comment"> null}</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> filename} is the empty string</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if {</span><span class="type">@code</span><span class="comment"> filename} has invalid filetype extension</span>
<span class="comment">     * </span><span class="type">@throws</span><span class="comment"> IllegalArgumentException if cannot write the file {</span><span class="type">@code</span><span class="comment"> filename}</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">save</span><span class="symbol">(</span><span class="usertype">String</span><span class="normal"> filename</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">validateNotNull</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"filename"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">.</span><span class="function">length</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"argument to save() is the empty string"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="usertype">File</span><span class="normal"> file </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">File</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">);</span>
<span class="normal">        </span><span class="usertype">String</span><span class="normal"> suffix </span><span class="symbol">=</span><span class="normal"> filename</span><span class="symbol">.</span><span class="function">substring</span><span class="symbol">(</span><span class="normal">filename</span><span class="symbol">.</span><span class="function">lastIndexOf</span><span class="symbol">(</span><span class="string">'.'</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> </span><span class="number">1</span><span class="symbol">);</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="normal">filename</span><span class="symbol">.</span><span class="function">contains</span><span class="symbol">(</span><span class="string">"."</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> suffix</span><span class="symbol">.</span><span class="function">length</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"the filename '"</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename </span><span class="symbol">+</span><span class="normal"> </span><span class="string">"' has no file extension, such as .jpg or .png"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="keyword">try</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="comment">// if the file format supports transparency (such as PNG or GIF)</span>
<span class="normal">            </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ImageIO</span><span class="symbol">.</span><span class="function">write</span><span class="symbol">(</span><span class="normal">onscreenImage</span><span class="symbol">,</span><span class="normal"> suffix</span><span class="symbol">,</span><span class="normal"> file</span><span class="symbol">))</span><span class="normal"> </span><span class="keyword">return</span><span class="symbol">;</span>

<span class="normal">            </span><span class="comment">// if the file format does not support transparency (such as JPEG or BMP)</span>
<span class="normal">            </span><span class="usertype">BufferedImage</span><span class="normal"> saveImage </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">BufferedImage</span><span class="symbol">(</span><span class="number">2</span><span class="symbol">*</span><span class="normal">width</span><span class="symbol">,</span><span class="normal"> </span><span class="number">2</span><span class="symbol">*</span><span class="normal">height</span><span class="symbol">,</span><span class="normal"> BufferedImage</span><span class="symbol">.</span><span class="normal">TYPE_INT_RGB</span><span class="symbol">);</span>
<span class="normal">            saveImage</span><span class="symbol">.</span><span class="function">createGraphics</span><span class="symbol">().</span><span class="function">drawImage</span><span class="symbol">(</span><span class="normal">onscreenImage</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> Color</span><span class="symbol">.</span><span class="normal">WHITE</span><span class="symbol">,</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">);</span>
<span class="normal">            </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ImageIO</span><span class="symbol">.</span><span class="function">write</span><span class="symbol">(</span><span class="normal">saveImage</span><span class="symbol">,</span><span class="normal"> suffix</span><span class="symbol">,</span><span class="normal"> file</span><span class="symbol">))</span><span class="normal"> </span><span class="keyword">return</span><span class="symbol">;</span>

<span class="normal">            </span><span class="comment">// failed to save the file; probably wrong format</span>
<span class="normal">            </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"the filetype '"</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> suffix </span><span class="symbol">+</span><span class="normal"> </span><span class="string">"' is not supported"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="keyword">catch</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">IOException</span><span class="normal"> e</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">IllegalArgumentException</span><span class="symbol">(</span><span class="string">"could not write the file + "</span><span class="normal"> </span><span class="symbol">+</span><span class="normal"> filename</span><span class="symbol">,</span><span class="normal"> e</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">actionPerformed</span><span class="symbol">(</span><span class="usertype">ActionEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="usertype">FileDialog</span><span class="normal"> chooser </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">FileDialog</span><span class="symbol">(</span><span class="normal">frame</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"Use a .png or .jpg extension"</span><span class="symbol">,</span><span class="normal"> FileDialog</span><span class="symbol">.</span><span class="normal">SAVE</span><span class="symbol">);</span>
<span class="normal">        chooser</span><span class="symbol">.</span><span class="function">setVisible</span><span class="symbol">(</span><span class="keyword">true</span><span class="symbol">);</span>
<span class="normal">        </span><span class="usertype">String</span><span class="normal"> selectedDirectory </span><span class="symbol">=</span><span class="normal"> chooser</span><span class="symbol">.</span><span class="function">getDirectory</span><span class="symbol">();</span>
<span class="normal">        </span><span class="usertype">String</span><span class="normal"> selectedFilename </span><span class="symbol">=</span><span class="normal"> chooser</span><span class="symbol">.</span><span class="function">getFile</span><span class="symbol">();</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">selectedDirectory </span><span class="symbol">!=</span><span class="normal"> </span><span class="keyword">null</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> selectedFilename </span><span class="symbol">!=</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">try</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">                </span><span class="function">save</span><span class="symbol">(</span><span class="normal">selectedDirectory </span><span class="symbol">+</span><span class="normal"> selectedFilename</span><span class="symbol">);</span>
<span class="normal">            </span><span class="cbracket">}</span>
<span class="normal">            </span><span class="keyword">catch</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">IllegalArgumentException</span><span class="normal"> e</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">                System</span><span class="symbol">.</span><span class="normal">err</span><span class="symbol">.</span><span class="function">println</span><span class="symbol">(</span><span class="normal">e</span><span class="symbol">.</span><span class="function">getMessage</span><span class="symbol">());</span>
<span class="normal">            </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>



<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Event-based interactions.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Adds a {</span><span class="type">@link</span><span class="comment"> DrawListener} to listen to keyboard and mouse events.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> listener the {\tt DrawListener} argument</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">addListener</span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="comment">// ensure there is a window for listening to events</span>
<span class="normal">        </span><span class="function">show</span><span class="symbol">();</span>
<span class="normal">        listeners</span><span class="symbol">.</span><span class="function">add</span><span class="symbol">(</span><span class="normal">listener</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>




<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Mouse interactions.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns true if the mouse is being pressed.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> {</span><span class="type">@code</span><span class="comment"> true} if the mouse is being pressed;</span>
<span class="comment">     *         {</span><span class="type">@code</span><span class="comment"> false} otherwise</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">boolean</span><span class="normal"> </span><span class="function">isMousePressed</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> isMousePressed</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns true if the mouse is being pressed.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> {</span><span class="type">@code</span><span class="comment"> true} if the mouse is being pressed;</span>
<span class="comment">     *         {</span><span class="type">@code</span><span class="comment"> false} otherwise</span>
<span class="comment">     * </span><span class="type">@deprecated</span><span class="comment"> replaced by {</span><span class="type">@link</span><span class="comment"> #isMousePressed()}</span>
<span class="comment">     */</span>
<span class="normal">    @Deprecated</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">boolean</span><span class="normal"> </span><span class="function">mousePressed</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> isMousePressed</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns the x-coordinate of the mouse.</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the x-coordinate of the mouse</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">double</span><span class="normal"> </span><span class="function">mouseX</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> mouseX</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns the y-coordinate of the mouse.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the y-coordinate of the mouse</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">double</span><span class="normal"> </span><span class="function">mouseY</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> mouseY</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>



<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">mouseEntered</span><span class="symbol">(</span><span class="usertype">MouseEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="comment">// this body is intentionally left empty</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">mouseExited</span><span class="symbol">(</span><span class="usertype">MouseEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="comment">// this body is intentionally left empty</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">mousePressed</span><span class="symbol">(</span><span class="usertype">MouseEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            mouseX </span><span class="symbol">=</span><span class="normal"> </span><span class="function">userX</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getX</span><span class="symbol">());</span>
<span class="normal">            mouseY </span><span class="symbol">=</span><span class="normal"> </span><span class="function">userY</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getY</span><span class="symbol">());</span>
<span class="normal">            isMousePressed </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">true</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getButton</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> MouseEvent</span><span class="symbol">.</span><span class="normal">BUTTON1</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">                listener</span><span class="symbol">.</span><span class="function">mousePressed</span><span class="symbol">(</span><span class="function">userX</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getX</span><span class="symbol">()),</span><span class="normal"> </span><span class="function">userY</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getY</span><span class="symbol">()));</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">mouseReleased</span><span class="symbol">(</span><span class="usertype">MouseEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            isMousePressed </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">false</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getButton</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> MouseEvent</span><span class="symbol">.</span><span class="normal">BUTTON1</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">                listener</span><span class="symbol">.</span><span class="function">mouseReleased</span><span class="symbol">(</span><span class="function">userX</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getX</span><span class="symbol">()),</span><span class="normal"> </span><span class="function">userY</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getY</span><span class="symbol">()));</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">mouseClicked</span><span class="symbol">(</span><span class="usertype">MouseEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getButton</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> MouseEvent</span><span class="symbol">.</span><span class="normal">BUTTON1</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">                listener</span><span class="symbol">.</span><span class="function">mouseClicked</span><span class="symbol">(</span><span class="function">userX</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getX</span><span class="symbol">()),</span><span class="normal"> </span><span class="function">userY</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getY</span><span class="symbol">()));</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">mouseDragged</span><span class="symbol">(</span><span class="usertype">MouseEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal">  </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            mouseX </span><span class="symbol">=</span><span class="normal"> </span><span class="function">userX</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getX</span><span class="symbol">());</span>
<span class="normal">            mouseY </span><span class="symbol">=</span><span class="normal"> </span><span class="function">userY</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getY</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">        </span><span class="comment">// doesn't seem to work if a button is specified</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">            listener</span><span class="symbol">.</span><span class="function">mouseDragged</span><span class="symbol">(</span><span class="function">userX</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getX</span><span class="symbol">()),</span><span class="normal"> </span><span class="function">userY</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getY</span><span class="symbol">()));</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">mouseMoved</span><span class="symbol">(</span><span class="usertype">MouseEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">mouseLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            mouseX </span><span class="symbol">=</span><span class="normal"> </span><span class="function">userX</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getX</span><span class="symbol">());</span>
<span class="normal">            mouseY </span><span class="symbol">=</span><span class="normal"> </span><span class="function">userY</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getY</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>


<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Keyboard interactions.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Returns true if the user has typed a key.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> {</span><span class="type">@code</span><span class="comment"> true} if the user has typed a key; {</span><span class="type">@code</span><span class="comment"> false} otherwise</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">boolean</span><span class="normal"> </span><span class="function">hasNextKeyTyped</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">keyLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> </span><span class="symbol">!</span><span class="normal">keysTyped</span><span class="symbol">.</span><span class="function">isEmpty</span><span class="symbol">();</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * The next key typed by the user.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> the next key typed by the user</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">char</span><span class="normal"> </span><span class="function">nextKeyTyped</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">keyLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> keysTyped</span><span class="symbol">.</span><span class="function">removeLast</span><span class="symbol">();</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">   </span><span class="comment">/**</span>
<span class="comment">     * Returns true if the keycode is being pressed.</span>
<span class="comment">     * </span><span class="keyword">&lt;p&gt;</span>
<span class="comment">     * This method takes as an argument the keycode (corresponding to a physical key).</span>
<span class="comment">     * It can handle action keys (such as F1 and arrow keys) and modifier keys</span>
<span class="comment">     * (such as shift and control).</span>
<span class="comment">     * See {</span><span class="type">@link</span><span class="comment"> KeyEvent} for a description of key codes.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  keycode the keycode to check</span>
<span class="comment">     * </span><span class="type">@return</span><span class="comment"> {</span><span class="type">@code</span><span class="comment"> true} if {</span><span class="type">@code</span><span class="comment"> keycode} is currently being pressed;</span>
<span class="comment">     *         {</span><span class="type">@code</span><span class="comment"> false} otherwise</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">boolean</span><span class="normal"> </span><span class="function">isKeyPressed</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> keycode</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">keyLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> keysDown</span><span class="symbol">.</span><span class="function">contains</span><span class="symbol">(</span><span class="normal">keycode</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">keyTyped</span><span class="symbol">(</span><span class="usertype">KeyEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">keyLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            keysTyped</span><span class="symbol">.</span><span class="function">addFirst</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getKeyChar</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="comment">// notify all listeners</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">            listener</span><span class="symbol">.</span><span class="function">keyTyped</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getKeyChar</span><span class="symbol">());</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">keyPressed</span><span class="symbol">(</span><span class="usertype">KeyEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">keyLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            keysDown</span><span class="symbol">.</span><span class="function">add</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getKeyCode</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="comment">// notify all listeners</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">            listener</span><span class="symbol">.</span><span class="function">keyPressed</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getKeyCode</span><span class="symbol">());</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * This method cannot be called directly.</span>
<span class="comment">     */</span>
<span class="normal">    @Override</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">keyReleased</span><span class="symbol">(</span><span class="usertype">KeyEvent</span><span class="normal"> event</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">keyLock</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            keysDown</span><span class="symbol">.</span><span class="function">remove</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getKeyCode</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="comment">// notify all listeners</span>
<span class="normal">        </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">            listener</span><span class="symbol">.</span><span class="function">keyReleased</span><span class="symbol">(</span><span class="normal">event</span><span class="symbol">.</span><span class="function">getKeyCode</span><span class="symbol">());</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  Timer events.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">   </span><span class="comment">/**</span>
<span class="comment">     * Sets a timer that calls update() method a specified number of times</span>
<span class="comment">     * per second.</span>
<span class="comment">     * </span><span class="keyword">&lt;p&gt;</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment">  callsPerSecond calls per second</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">enableTimer</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> callsPerSecond</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="function">disableTimer</span><span class="symbol">();</span>
<span class="normal">        timer </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Timer</span><span class="symbol">();</span>
<span class="normal">        timer</span><span class="symbol">.</span><span class="function">schedule</span><span class="symbol">(</span><span class="keyword">new</span><span class="normal"> </span><span class="function">MyTimerTask</span><span class="symbol">(),</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="symbol">(</span><span class="type">int</span><span class="symbol">)</span><span class="normal"> Math</span><span class="symbol">.</span><span class="function">round</span><span class="symbol">(</span><span class="number">1000.0</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> callsPerSecond</span><span class="symbol">));</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">disableTimer</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">timer </span><span class="symbol">!=</span><span class="normal"> </span><span class="keyword">null</span><span class="symbol">)</span><span class="normal"> timer</span><span class="symbol">.</span><span class="function">cancel</span><span class="symbol">();</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">class</span><span class="normal"> </span><span class="classname">MyTimerTask</span><span class="normal"> </span><span class="keyword">extends</span><span class="normal"> TimerTask </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="keyword">public</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">run</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="usertype">DrawListener</span><span class="normal"> listener </span><span class="symbol">:</span><span class="normal"> listeners</span><span class="symbol">)</span>
<span class="normal">                listener</span><span class="symbol">.</span><span class="function">update</span><span class="symbol">();</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">   </span><span class="comment">/***************************************************************************</span>
<span class="comment">    *  For improved resolution on Mac Retina displays.</span>
<span class="comment">    ***************************************************************************/</span>

<span class="normal">    </span><span class="keyword">private</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="keyword">class</span><span class="normal"> </span><span class="classname">RetinaImageIcon</span><span class="normal"> </span><span class="keyword">extends</span><span class="normal"> ImageIcon </span><span class="cbracket">{</span>

<span class="normal">        </span><span class="keyword">public</span><span class="normal"> </span><span class="function">RetinaImageIcon</span><span class="symbol">(</span><span class="usertype">Image</span><span class="normal"> image</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">super</span><span class="symbol">(</span><span class="normal">image</span><span class="symbol">);</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="keyword">public</span><span class="normal"> </span><span class="type">int</span><span class="normal"> </span><span class="function">getIconWidth</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> </span><span class="keyword">super</span><span class="symbol">.</span><span class="function">getIconWidth</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> </span><span class="number">2</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="comment">/**</span>
<span class="comment">         * Returns the height of the icon.</span>
<span class="comment">         *</span>
<span class="comment">         * </span><span class="type">@return</span><span class="comment"> the height in pixels of this icon</span>
<span class="comment">         */</span>
<span class="normal">        </span><span class="keyword">public</span><span class="normal"> </span><span class="type">int</span><span class="normal"> </span><span class="function">getIconHeight</span><span class="symbol">()</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="keyword">return</span><span class="normal"> </span><span class="keyword">super</span><span class="symbol">.</span><span class="function">getIconHeight</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> </span><span class="number">2</span><span class="symbol">;</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">        </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">synchronized</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">paintIcon</span><span class="symbol">(</span><span class="usertype">Component</span><span class="normal"> c</span><span class="symbol">,</span><span class="normal"> </span><span class="usertype">Graphics</span><span class="normal"> g</span><span class="symbol">,</span><span class="normal"> </span><span class="type">int</span><span class="normal"> x</span><span class="symbol">,</span><span class="normal"> </span><span class="type">int</span><span class="normal"> y</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="usertype">Graphics2D</span><span class="normal"> g2 </span><span class="symbol">=</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">Graphics2D</span><span class="symbol">)</span><span class="normal"> g</span><span class="symbol">.</span><span class="function">create</span><span class="symbol">();</span>
<span class="normal">            g2</span><span class="symbol">.</span><span class="function">setRenderingHint</span><span class="symbol">(</span><span class="normal">RenderingHints</span><span class="symbol">.</span><span class="normal">KEY_INTERPOLATION</span><span class="symbol">,</span><span class="normal"> RenderingHints</span><span class="symbol">.</span><span class="normal">VALUE_INTERPOLATION_BICUBIC</span><span class="symbol">);</span>
<span class="normal">            g2</span><span class="symbol">.</span><span class="function">setRenderingHint</span><span class="symbol">(</span><span class="normal">RenderingHints</span><span class="symbol">.</span><span class="normal">KEY_RENDERING</span><span class="symbol">,</span><span class="normal">     RenderingHints</span><span class="symbol">.</span><span class="normal">VALUE_RENDER_QUALITY</span><span class="symbol">);</span>
<span class="normal">            g2</span><span class="symbol">.</span><span class="function">setRenderingHint</span><span class="symbol">(</span><span class="normal">RenderingHints</span><span class="symbol">.</span><span class="normal">KEY_ANTIALIASING</span><span class="symbol">,</span><span class="normal">  RenderingHints</span><span class="symbol">.</span><span class="normal">VALUE_ANTIALIAS_ON</span><span class="symbol">);</span>
<span class="normal">            g2</span><span class="symbol">.</span><span class="function">scale</span><span class="symbol">(</span><span class="number">0.5</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.5</span><span class="symbol">);</span>
<span class="normal">            </span><span class="keyword">super</span><span class="symbol">.</span><span class="function">paintIcon</span><span class="symbol">(</span><span class="normal">c</span><span class="symbol">,</span><span class="normal"> g2</span><span class="symbol">,</span><span class="normal"> x </span><span class="symbol">*</span><span class="normal"> </span><span class="number">2</span><span class="symbol">,</span><span class="normal"> y </span><span class="symbol">*</span><span class="normal"> </span><span class="number">2</span><span class="symbol">);</span>
<span class="normal">            g2</span><span class="symbol">.</span><span class="function">dispose</span><span class="symbol">();</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="comment">/**</span>
<span class="comment">     * Test client.</span>
<span class="comment">     *</span>
<span class="comment">     * </span><span class="type">@param</span><span class="comment"> args the command-line arguments</span>
<span class="comment">     */</span>
<span class="normal">    </span><span class="keyword">public</span><span class="normal"> </span><span class="keyword">static</span><span class="normal"> </span><span class="type">void</span><span class="normal"> </span><span class="function">main</span><span class="symbol">(</span><span class="normal">String</span><span class="symbol">[]</span><span class="normal"> args</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>

<span class="normal">        </span><span class="comment">// create one drawing window</span>
<span class="normal">        </span><span class="usertype">Draw</span><span class="normal"> draw1 </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Draw</span><span class="symbol">();</span>
<span class="normal">        draw1</span><span class="symbol">.</span><span class="function">setTitle</span><span class="symbol">(</span><span class="string">"Test client 1"</span><span class="symbol">);</span>
<span class="normal">        draw1</span><span class="symbol">.</span><span class="function">square</span><span class="symbol">(</span><span class="number">0.2</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.8</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.1</span><span class="symbol">);</span>
<span class="normal">        draw1</span><span class="symbol">.</span><span class="function">filledSquare</span><span class="symbol">(</span><span class="number">0.8</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.8</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.2</span><span class="symbol">);</span>
<span class="normal">        draw1</span><span class="symbol">.</span><span class="function">circle</span><span class="symbol">(</span><span class="number">0.8</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.2</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.2</span><span class="symbol">);</span>
<span class="normal">        draw1</span><span class="symbol">.</span><span class="function">setPenColor</span><span class="symbol">(</span><span class="normal">Draw</span><span class="symbol">.</span><span class="normal">MAGENTA</span><span class="symbol">);</span>
<span class="normal">        draw1</span><span class="symbol">.</span><span class="function">setPenRadius</span><span class="symbol">(</span><span class="number">0.02</span><span class="symbol">);</span>
<span class="normal">        draw1</span><span class="symbol">.</span><span class="function">arc</span><span class="symbol">(</span><span class="number">0.8</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.2</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.1</span><span class="symbol">,</span><span class="normal"> </span><span class="number">200</span><span class="symbol">,</span><span class="normal"> </span><span class="number">45</span><span class="symbol">);</span>


<span class="normal">        </span><span class="comment">// create another one</span>
<span class="normal">        </span><span class="usertype">Draw</span><span class="normal"> draw2 </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Draw</span><span class="symbol">();</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">setCanvasSize</span><span class="symbol">(</span><span class="number">900</span><span class="symbol">,</span><span class="normal"> </span><span class="number">200</span><span class="symbol">);</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">setTitle</span><span class="symbol">(</span><span class="string">"Test client 2"</span><span class="symbol">);</span>
<span class="normal">        </span><span class="comment">// draw a blue diamond</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">setPenRadius</span><span class="symbol">();</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">setPenColor</span><span class="symbol">(</span><span class="normal">Draw</span><span class="symbol">.</span><span class="normal">BLUE</span><span class="symbol">);</span>
<span class="normal">        </span><span class="type">double</span><span class="symbol">[]</span><span class="normal"> x </span><span class="symbol">=</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="number">0.1</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.2</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.3</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.2</span><span class="normal"> </span><span class="cbracket">}</span><span class="symbol">;</span>
<span class="normal">        </span><span class="type">double</span><span class="symbol">[]</span><span class="normal"> y </span><span class="symbol">=</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal"> </span><span class="number">0.2</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.3</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.2</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.1</span><span class="normal"> </span><span class="cbracket">}</span><span class="symbol">;</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">filledPolygon</span><span class="symbol">(</span><span class="normal">x</span><span class="symbol">,</span><span class="normal"> y</span><span class="symbol">);</span>

<span class="normal">        </span><span class="comment">// text</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">setPenColor</span><span class="symbol">(</span><span class="normal">Draw</span><span class="symbol">.</span><span class="normal">BLACK</span><span class="symbol">);</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">text</span><span class="symbol">(</span><span class="number">0.2</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.5</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"bdfdfdfdlack text"</span><span class="symbol">);</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">setPenColor</span><span class="symbol">(</span><span class="normal">Draw</span><span class="symbol">.</span><span class="normal">WHITE</span><span class="symbol">);</span>
<span class="normal">        draw2</span><span class="symbol">.</span><span class="function">text</span><span class="symbol">(</span><span class="number">0.8</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0.8</span><span class="symbol">,</span><span class="normal"> </span><span class="string">"white text"</span><span class="symbol">);</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="cbracket">}</span>
</tt></pre>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10811519-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>

<p><br><address><small>
Copyright &copy; 2000&ndash;2022, Robert Sedgewick and Kevin Wayne.
<br>Last updated: Mon Jul 22 08:17:07 AM EDT 2024.
</small></address>

</html>
